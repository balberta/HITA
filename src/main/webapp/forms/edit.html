<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>View/Edit Task</title>
    <link rel="stylesheet" type="text/css" href="../css/view.css" media="all">
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="../js/view.js"></script>

</head>
<body id="main_body">

<img id="top" src="../img/top.png" alt="">

<div id="form_container">

    <h1><a>View/Edit Task</a></h1>

    <form id="form_812181" class="appnitro">
        <div class="form_description">
            <h2>View/Edit Task</h2>

            <p>View or edit an existing task.</p>
        </div>
        <ul>

            <li id="li_1">
                <label class="description" for="uuid">ID </label>

                <div>
                    <input id="uuid" name="id" class="element text small" type="text" maxlength="255" value=""
                           disabled="disabled"/>
                </div>
            </li>
            <li id="li_2">
                <label class="description" for="name">Name </label>

                <div>
                    <input id="name" name="name" class="element text medium" type="text" maxlength="255" value=""/>
                </div>
                <p class="guidelines" id="guide_2">
                    <small>Change the name of the task.</small>
                </p>
            </li>
            <li id="li_4">
                <label class="description" for="type">Type </label>

                <div>
                    <select class="element select medium" id="type" name="type">
                        <option value="" selected="selected"></option>
                        <option value="Issue">Issue</option>
                        <option value="Task">Task</option>

                    </select>
                </div>

                <p class="guidelines" id="guide_4">
                    <small>Select type.</small>
                </p>
            </li>
            <li id="li_5">
                <label class="description" for="status">Status </label>

                <div>
                    <select class="element select medium" id="status" name="status">
                        <option value="" selected="selected"></option>
                        <option value="New">New</option>
                        <option value="Open">Open</option>
                        <option value="Closed">Closed</option>

                    </select>
                </div>
                <p class="guidelines" id="guide_5">
                    <small>Select status.</small>
                </p>
            </li>
            <li id="li_3">
                <label class="description" for="desc">Description </label>

                <div>
                    <textarea id="desc" name="desc" class="element textarea large"></textarea>
                </div>
                <p class="guidelines" id="guide_3">
                    <small>Update description.</small>
                </p>
            </li>

            <li class="buttons">
                <input type="hidden" name="form_id" value="812181"/>

                <input id="submitForm" class="button_text" type="button" name="submit" value="Submit"/>
            </li>
        </ul>
    </form>
    <div id="footer">
        Generated by <a href="http://www.phpform.org">pForm</a>
    </div>
</div>
<img id="bottom" src="../img/bottom.png" alt="">
</body>
</html>


<script type="text/javascript">
    $(document).ready(function start_it_up() {
        populateForm(getUrlVars());
        //hashURL();
    });
    function getUrlVars() {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');

        for (var i = 0; i < hashes.length; i++) {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        console.log(vars);

        //document.getElementById(vars[0]).value = vars[]
        //console.log(vars[vars[0]]);
        return vars;
    }

    function hashURL() {
        var hashParams = window.location.hash.substr(1).split('&'); // substr(1) to remove the `#`
        for (var i = 0; i < hashParams.length; i++) {
            var p = hashParams[i].split('=');
            document.getElementById(p[0]).value = decodeURIComponent(p[1]);
            ;
        }
        console.log(hashParams);
    }
    function populateForm(urlVars) {
        console.log("param size: " + urlVars.length);
        for (var i = 0; i < urlVars.length; i++) {
          //  console.log("index: " + urlVars[i] + " Value: " + urlVars[urlVars[i]]);
            document.getElementById(urlVars[i]).value = urlVars[urlVars[i]];
        }

    }

    function checkForm() {
        var urlVars = getUrlVars();
        var submitURI = "/hita/service/update?";
        for (var i = 0; i < urlVars.length; i++) {
            //console.log("index: " + urlVars[i] + " Value: " + urlVars[urlVars[i]]);
            //document.getElementById(urlVars[i]).value = urlVars[urlVars[i]];
          // console.log(document.getElementById(urlVars[i]).value + " ----- " + urlVars[urlVars[i]] );

            if (document.getElementById(urlVars[i]).value == urlVars[urlVars[i]]) {
                //console.log("not equal");
                   submitURI+="?"+urlVars[i]+"=";
            }
            else
            {
                submitURI+=urlVars[i]+"="+ document.getElementById(urlVars[i]).value;
            }
        }
        console.log(submitURI);
    }

    var submit_button = $('#submitForm');
    submit_button.click(function () {
        //alert("You clicked me!");
        checkForm();
    });
    //var urlVars = getUrlVars();
</script>